### 1.10 小结

1、计算机系统是由硬件和系统软件组成的，它们共同协作以运行应用程序。

计算机内部的信息被表示为一组组的位，它们依据上下文有不同的解释方式。

程序被其他程序翻译成不同的形式，开始时是 ASCII 文本，然后被编译器和链接器翻译成二进制可执行文件。【二进制可执行文件】

2、处理器读取并解释存放在主存里的二进制指令。因为计算机花费了大量的时间在内存、I/O 设备和 CPU 寄存器之间复制数据，所以将系统中的存储设备划分成层次结构——CPU寄存器在顶部，接着是多层的硬件高速缓存存储器、DRAM 主存和磁盘存储器。

在层次模型中，位于更高层的存储设备比底层的存储设备要更快，单位比特造价也更高。

层次结构中较高层次的存储设备可以作为较低层次设备的高速缓存。通过理解和运用这种存储层次结构的知识，程序员可以优化 C 程序的性能。

3、操作系统内核是应用程序和硬件之间的媒介。它提供了三个基本的抽象：1）文件是对 I/O 设备的抽象；2）虚拟内存是对主存和磁盘的抽象；3）进程是处理、主存和 I/O 设备的抽象。

最后，网络提供了计算机系统之间通信的手段。从特殊系统的角度来看，网络就是一种 I/O 设备。


---
## ch2 信息的表示和处理

2.1 信息存储

大多数计算机使用 8 位的块，或者字节（byte），作为最小的可寻址的内存单位，而不是访问内存中单独的位。机器级程序将内存视为一个非常大的字节数组，称为虚拟内存（virtual memory）。

内存的每个字节都由一个唯一的数字来标识，称为它的地址（address），所有可能地址的集合就称为虚拟地址空间（virtual address space）。

**程序对象（program object），即程序数据、指令和控制信息。**

2.1.2 字数据大小

每台计算机都有一个字长（word size），指明指针数据的标称大小（nominal size）。因为虚拟地址是以这样的一个字来编码的，所以字长决定的最重要的系统参数就是虚拟地址空间的最大大小。也就是说，对于一个字长位 w 位的机器而言，虚拟地址的范围为 0~2^w - 1，程序最多访问 2^w 个字节。

将程序称为 “32位程序” 或 “64 位程序”时，区别在于该程序是如何编译的，而不是其运行的机器类型。


(page 28) 声明指针： 对于任何数据类型 T，声明 `T *p;` 表明 p 是一个指针变量，指向一个类型为 T 的对象。例如，`char *p;` 就将一个指针声明为指向一个 char 类型的对象。

(page 29) 程序员应该力图使他们的程序在不同的机器和编译器上可移植。可移植性的一个方面就是使程序对不同数据类型的确切大小不敏感。C 语言标准对不同数据类型的数字范围设置了下界，但却没有上界。
因为 1980 年左右到 2010 年左右，32 位机器和 32 位程序使主流的组合，许多程序的编写都假设位图 2-3 中 32位程序的字节分配。随着 64 位机器的日益普及，在将这些程序移植到新机器上时，许多隐藏的对字长的依赖性就会显现出来，成为错误。比如，许多程序假设一个声明位 int 类型的程序对象能被用来存储一个指针。这在大多数 32 位的机器上能正常工作，但是在一台 64 位的机器上却会导致问题。


2.1.3 寻址和字节顺序

对于跨多字节的程序对象，我们必须建立两个规则：这个对象的地址是什么，以及在内存中如何排列这些字节。

几乎所有的机器中，多字节对象都被存储为【连续的字节序列】，对象的地址为所使用字节中最小的地址。例如，假设一个类型为 int 的变量 x 的地址为 0x100，也就是说，地址表达式  `&x` 的值为 0x100。那么，（假设数据类型 int 为 32 位表示） x 的 4 字节将被存储在内存的 0x100、0x101、0x102 和 0x103 位置。


排列表示一个对象的字节有两个通用的规则。考虑一个 w 位的整数，其位表示位 [Xw-1, Xw-2, ..., X1, X0]，其中 Xw-1 是最高有效位，而 X0 是最低有效位。假设 w 是 8 的倍数，这些位就能被分组成为字节，其中最高有效位字节包含位 [Xw-1, Xw-2, ..., Xw-8]，而最低有效位字节包含位 [X7, X6, ..., X0]，其他字节包含中间的位。

对于大多数应用程序员来说，其机器所使用的字节顺序是完全不可见的。

有时候，字节顺序会成为问题。在不同类型的机器之间通过网络传送二进制数据时，一个常见的问题是当小端法机器产生的数据被发送到大端法机器或者反过来时，接受程序会发现，字里的字节成了反序的。


机器级程序

一条指令的字节级表示



C 代码，使用强制类型转换类访问和打印不同程序对象的字节表示。

用 typedef 将数据类型 byte_pointer 定义为一个指向类型为 "unsigned char" 的对象的指针。这样一个指针引用一个字节序列，其中每个字节都被认为是一个非负整数。

```
// ...
typedef unsinged char *byte_pointer

//...
```